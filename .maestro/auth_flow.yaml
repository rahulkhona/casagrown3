appId: dev.casagrown.community
---
- launchApp:
    clearState: true
- extendedWaitUntil:
    visible: 'CasaGrown'
    timeout: 600000

# Navigate to Login from Home Screen
- tapOn: 'Join the Movement!'

# Verify Login Screen loaded
- assertVisible: 'Welcome to CasaGrown'
- assertVisible: 'Sign in to start buying and selling fresh produce'
- assertVisible: 'Continue with Google'
- assertVisible: 'Continue with Facebook'
- assertVisible: 'Continue with Apple'

# Test Email OTP Flow
- tapOn: 'Continue with Email'
- assertVisible: 'Email Address'
- tapOn: 'you@example.com' # Tap placeholder to focus input
- inputText: 'test@example.com'
- hideKeyboard
- waitForAnimationToEnd # Let UI settle after keyboard dismiss
- tapOn: 'Send Verification Code'

# Verify OTP screen is displayed (skipping OTP verification for now)
- extendedWaitUntil:
    visible: 'We sent a verification code to'
    timeout: 30000
- assertVisible: 'test@example.com'
- assertVisible: 'Verification Code'
- assertVisible: 'Verify & Continue'
- assertVisible: 'Resend code'
# TODO: Add OTP verification steps when Inbucket fetch is fixed for Android
