# Feed Navigation Flow — Maestro E2E test
# Tests feed content visibility after login and basic navigation.
# Navigation: avatar tap → profile, Back button → feed

appId: dev.casagrown.community

---

# Login first
- runFlow: ../utils/login.yaml

# Wait for feed to load
- extendedWaitUntil:
      visible: "Tomatoes"
      timeout: 15000

# Verify seeded post content
- assertVisible: "Test Seller"
- assertVisible: "Tomatoes"

# Scroll down to find the buy post and verify its new fields
- scroll
- extendedWaitUntil:
      visible:
          text: ".*Looking for.*"
      timeout: 10000
- assertVisible:
      text: ".*Looking for.*3.*"
- assertVisible:
      text: ".*Need by.*"
- assertVisible:
      text: ".*Drop-off.*"

# Scroll back up
- scrollUntilVisible:
      element: "Tomatoes"
      direction: UP
      timeout: 10000

# Navigate to profile via header avatar initial
- tapOn:
      text: "T"
      index: 0

# Verify we're on the profile screen
- extendedWaitUntil:
      visible: "Profile Settings"
      timeout: 10000
- assertVisible: "Edit Profile"

# Go back to feed via the Back button (ChevronLeft)
- tapOn: "Back"

# Verify we're back on the feed
- extendedWaitUntil:
      visible: "Tomatoes"
      timeout: 10000
